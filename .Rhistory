#Lazer em campinas
infs$LAZER_CAMPINAS_CARACTERISTICA <- fct_collapse(as.factor(infs$LAZER_CAMPINAS_CARACTERISTICA), "custo" = c("custo", "ambos"))
levels(infs$LAZER_CAMPINAS_CARACTERISTICA)
### Normalização de índices ####
escalas <- infs %>%
select(INDICE_ESCOL3, INDICE_OCUPACAO, INDICE_OUTRO_CARGO2, INDICE_OCUPACAO_SONHOS2, INDICE_LOCOMOCAO, INDICE_MEGA, INDICE_LAZER, INDICE_LAZER_CAMPINAS, INDICE_VIAGEM, INDICE_VIAGEM_LUGAR, INDICE_VIAGEM_VONTADE, INDICE_BAIRRO, INDICE_INFANCIA, INDICE_RENDA_IND, INDICE_RENDA_FAM, INDICE_ESCOL_PAI, INDICE_OCUPACAO_PAI, INDICE_ESCOL_MAE, INDICE_OCUPACAO_MAE, DENSIDADE_HABITACAO, INDICE_IMOVEL) %>%
mutate(across(everything(), as.numeric)) %>%
print()
normalizar <- function(x, n = max(x, na.rm = TRUE)) {
(x * 5) / n}
infs <- infs %>%
mutate(across(all_of(names(escalas)),
~ normalizar(.),
.names = "{.col}_norm")) %>%
print()
infs$INDICE_IMOVEL_norm
head(infs)
str(infs)
## m2 ####
m2 <- read_csv("m2-bairros.csv", locale = locale(encoding = "UTF-8"),
col_types = cols(.default = col_character(),
PRECO = col_double(),
M2 = col_number(),
PRECOMETRO2 = col_number())) %>%
mutate(across(where(is.character), as.factor))
str(m2)
head(m2)
#calcular média do preço do m2 por bairro
m2$PRECOMETRO2
media_m2_bairro <- m2 %>%
group_by(BAIRRO) %>%
summarise(media_m2 = round(mean(PRECOMETRO2, na.rm = TRUE), 2)) %>%
arrange(media_m2) %>%
print(n = 22)
## juntar infs e m2 ####
setdiff(levels(infs$BAIRRO), levels(media_m2_bairro$BAIRRO))
infs2 <- left_join(infs, media_m2_bairro, by = "BAIRRO")
infs2$media_m2
# CALCULO INDICE SOCIOECONÔMICO ####
#escolaridade
#Media escolaridade e ocupação dos pais
#Ocupação sonhos
#Mega sena
#Renda ind
#média lazer e Lazer em Campinas
#média Viagem, Viagem Lugar e Viagem vontade
#Infância
# Função para calcular o índice ajustado
calcular_indice <- function(df) {
apply(df, 1, function(x) {
esc <- as.numeric(x["INDICE_ESCOL3_norm"])
pais <- mean(as.numeric(c(x["INDICE_ESCOL_PAI_norm"],
x["INDICE_ESCOL_MAE_norm"],
x["INDICE_OCUPACAO_PAI_norm"],
x["INDICE_OCUPACAO_MAE_norm"])), na.rm = TRUE)
lazer <- mean(as.numeric(c(x["INDICE_LAZER_norm"],
x["INDICE_LAZER_CAMPINAS_norm"])), na.rm = TRUE)
viagem <- mean(as.numeric(c(x["INDICE_VIAGEM_norm"],
x["INDICE_VIAGEM_LUGAR_norm"],
x["INDICE_VIAGEM_VONTADE_norm"])), na.rm = TRUE)
ocup_sonhos <- as.numeric(x["INDICE_OCUPACAO_SONHOS2_norm"])
mega        <- as.numeric(x["INDICE_MEGA_norm"])
renda       <- as.numeric(x["INDICE_RENDA_IND_norm"])
infancia    <- as.numeric(x["INDICE_INFANCIA_norm"])
componentes <- c(esc, pais, ocup_sonhos, mega, renda, infancia, lazer, viagem)
mean(componentes, na.rm = TRUE)
})
}
# Exemplo de uso
# supondo que seu data.frame seja 'dados'
infs2$INDICE_SOCIO_POLI <- calcular_indice(infs2)
infs2$INDICE_SOCIO_POLI
## juntar dadosAmostra2Poli com dados ifds ####
dados <- left_join(dadosAmostra2Poli, infs2, by = "PARTICIPANTE")
#View(dados)
str(dados)
setdiff(levels(dadosAmostra2Poli$PARTICIPANTE), levels(infs$PARTICIPANTE))
## Filtragens e manipulações de variáveis ####
dados1 <- dados %>%
filter(VD %in% c("A", "P", "0", "H")) %>%
droplevels()
dados1$VD <- factor(dados1$VD, levels = c("A", "P", "0", "H"))
levels(dados1$VD)
dados2 <- dados1 %>%
mutate(CFP_abertura2 = case_when(
CONT_FON_PREC %in% c("i", "I", "j", "J", "u", "U", "w", "W") ~ "fechada",
CONT_FON_PREC %in% c("e", "o", "O") ~ "meio.fechada",
CONT_FON_PREC %in% c("3", "c") ~ "meio.aberta",
CONT_FON_PREC %in% c("a", "A") ~ "aberta"),
CFP_abertura2 = factor(CFP_abertura2, levels = c("fechada", "meio.fechada", "meio.aberta", "aberta")),
CFS_pontoc2 = case_when(
CONT_FON_SEG == "#" ~ "pausa",
CONT_FON_SEG %in% c("t", "d", "l", "n") ~ "coronal",
CONT_FON_SEG %in% c("h", "k", "g") ~ "dorsal",
CONT_FON_SEG %in% c("b", "f", "m", "p", "v") ~ "labial"),
CFS_pontoc2 = factor(CFS_pontoc2, levels = c("pausa", "coronal", "dorsal", "labial")),
CFS_sonoridade = case_when(
CONT_FON_SEG == "#" ~ "pausa",
CONT_FON_SEG %in% c("b", "d","g", "l", "m", "n", "v") ~ "sonora",
CONT_FON_SEG %in% c("f", "h", "k", "p", "t") ~ "surda"),
CFS_sonoridade = factor(CFS_sonoridade, levels = c("pausa", "sonora", "surda"))
)
levels(dados2$ESCOLARIDADE)
### PALATALIZAÇÃO ####
dados_AP <- dados2 %>%
filter(VD %in% c("P", "A"),
CFS_pontoc2 == "coronal",
#PARTICIPANTE != "IsabelaS"
) %>%
droplevels()
levels(dados_AP$VD)
levels(dados_AP$CFS_pontoc2)
### APAGAMENTO ####
dados_S0 <- dados2 %>%
filter(!MORFEMA.PLURAL == "sim") %>%
mutate(VD = fct_collapse(VD,
S = c("A", "P", "H"),
`0` = "0")) %>%
droplevels()
levels(dados_S0$MORFEMA.PLURAL)
### ASPIRAÇÃO ####
dados_HAP <- dados2 %>%
filter(VD %in% c("A", "H", "P"),
CFS_sonoridade == "sonora") %>%
mutate(VD = fct_collapse(VD,
H = "H",
AP = c("A", "P"))) %>%
droplevels()
levels(dados_HAP$VD)
levels(dados_HAP$CFS_sonoridade)
#exportar arquivo
write.csv(dados2, "dados2.csv", row.names = TRUE)
#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#
# DISTRIBUIÇÃO GERAL ####
distribuicao.geral <- dados2 %>%
count(VD) %>%
mutate(prop = prop.table(n),
label = paste0(round(prop * 100, 1), "%\n(", n, ")")) %>%
print()
png("C:/Users/sarah/Downloads/analiseSclasse/analise-quantitativa/graficos/VD.png", width = 6.5, height = 4.5, units = "in", res = 300)
distribuicao.geral %>%
ggplot(aes(x = VD, y = prop, fill = VD, label = label)) +
geom_bar(stat = "identity", color = "white") +
labs(x = "Variável Dependente", y = "Proporção de Ocorrência", fill = "VD") +
scale_x_discrete(labels = c("Alveolar", "Palatal", "Zero Fonético", "Aspirada"))+
geom_text(aes(label = label),
vjust = -0.2,
size = 3.5) +
scale_fill_brewer(palette = "Reds")+
scale_y_continuous(labels = percent_format(accuracy = 1),
expand = expansion(mult = c(0, 0.15))) +  # aumenta espaço no topo para texto
theme_minimal()+
theme(
panel.grid.major = element_line(color = alpha("gray70", 0.2), linewidth = 0.5),
panel.grid.minor = element_line(color = alpha("gray85", 0.1), linewidth = 0.25),
axis.title.x = element_text(size = 9),  # tamanho do título eixo X
axis.title.y = element_text(size = 9),   # tamanho do título eixo Y
legend.position = "none")
dev.off()
#Distribuição por amostra ####
distribuicao.amostra <- dados2 %>%
count(AMOSTRA, VD) %>%
group_by(AMOSTRA) %>%
mutate(prop = prop.table(n),
label = paste0(round(prop * 100, 1), "%\n(", n, ")")) %>%
print()
png("C:/Users/sarah/Downloads/analiseSclasse/analise-quantitativa/graficos/VD-amostra.png", width = 6.5, height = 4.5, units = "in", res = 300)
distribuicao.amostra %>%
ggplot(aes(x = VD, y = prop, fill = VD, label = label)) +
geom_bar(stat = "identity", color = "white") +
labs(x = "Variável Dependente", y = "Proporção de Ocorrência", fill = "VD") +
scale_x_discrete(labels = c("Alveolar", "Palatal", "Zero Fonético", "Aspirada"))+
geom_text(aes(label = label),
vjust = -0.2,
size = 3.5) +
facet_wrap(. ~ AMOSTRA)+
scale_fill_brewer(palette = "Reds")+
scale_y_continuous(labels = percent_format(accuracy = 1),
expand = expansion(mult = c(0, 0.15))) + #espaço no topo para texto
theme_minimal()+
theme(
panel.grid.major = element_line(color = alpha("gray70", 0.2), linewidth = 0.5),
panel.grid.minor = element_line(color = alpha("gray85", 0.1), linewidth = 0.25),
axis.title.x = element_text(size = 9),  # tamanho do título eixo X
axis.title.y = element_text(size = 9),   # tamanho do título eixo Y
legend.position = "bottom")
dev.off()
# DISTRIBUIÇÃO GERAL POR PARTICIPANTE####
distribuicao.geral.participante <- dados2 %>%
count(PARTICIPANTE, VD) %>%
group_by(PARTICIPANTE) %>%
mutate(prop = prop.table(n),
label = paste0(round(prop * 100, 1), "%\n(", n, ")")) %>%
print()
png("C:/Users/sarah/Downloads/analiseSclasse/analise-quantitativa/graficos/VD-participante.png", width = 6.5, height = 4.5, units = "in", res = 300)
distribuicao.geral.participante %>%
ggplot(aes(x = VD, y = prop, fill = VD, label = label)) +
geom_bar(stat = "identity", color = "white") +
labs(x = "Variável Dependente", y = "Proporção de Ocorrência", fill = "VD") +
scale_x_discrete(labels = c("Alveolar", "Palatal", "Zero Fonético", "Aspirada"))+
geom_text(aes(label = label),
vjust = -0.2,
size = 3.5) +
facet_wrap(. ~ PARTICIPANTE)+
scale_fill_brewer(palette = "Reds")+
scale_y_continuous(labels = percent_format(accuracy = 1),
expand = expansion(mult = c(0, 0.15))) + #espaço no topo para texto
theme_minimal()+
theme(
panel.grid.major = element_line(color = alpha("gray70", 0.2), linewidth = 0.5),
panel.grid.minor = element_line(color = alpha("gray85", 0.1), linewidth = 0.25),
axis.title.x = element_text(size = 9),  # tamanho do título eixo X
axis.title.y = element_text(size = 9),   # tamanho do título eixo Y
legend.position = "bottom")
dev.off()
### ocupacao pai ####
ocupacao_pai <- dados2 %>%
distinct(PARTICIPANTE, INDICE_OCUPACAO_PAI) %>%  #garante 1 linha por participante
count(INDICE_OCUPACAO_PAI) %>%
arrange(INDICE_OCUPACAO_PAI) %>%
mutate(
categoria = case_when(
INDICE_OCUPACAO_PAI == 0 ~ "0. Desempregado/sem renda",
INDICE_OCUPACAO_PAI == 1 ~ "1. Trabalhador braçal s/ treinamento",
INDICE_OCUPACAO_PAI == 2 ~ "2. Trabalhador braçal c/ treinamento",
INDICE_OCUPACAO_PAI == 3 ~ "3. Funções admin./atend. ao público",
INDICE_OCUPACAO_PAI == 4 ~ "5. Microempres./ger. baixo escalão",
INDICE_OCUPACAO_PAI == 5 ~ "6. Profissionais especializados/liberais",
INDICE_OCUPACAO_PAI == 6 ~ "7. Peq. Emp./ger. alto escalão",
TRUE ~ as.character(INDICE_OCUPACAO_PAI)
),
categoria = factor(categoria, levels = unique(categoria))) %>%
print()
ocupacao_pai %>%
ggplot(aes(x = INDICE_OCUPACAO_PAI, y = n, label = n, fill = categoria)) +
geom_bar(stat = "identity", color = "white") +
labs(
x = "Índice de Ocupação",
y = "Número de Participantes")+
geom_text(aes(label = n), vjust = -0.3, size = 3.5) +
scale_y_continuous(expand = expansion(mult = c(0, 0.15)))+
scale_fill_brewer(palette = "Reds")+
theme_minimal()+
theme(panel.grid.major = element_line(color = alpha("gray70", 0.2), linewidth = 0.5),
panel.grid.minor = element_line(color = alpha("gray85", 0.1), linewidth = 0.25),
axis.title.x = element_text(size = 9),  # tamanho do título eixo X
axis.title.y = element_text(size = 9),   # tamanho do título eixo Y
)
## Escolaridade dos pais ####
escolaridade_pai <- dados2 %>%
distinct(PARTICIPANTE, ESCOLA_PAI2) %>%  #garante 1 linha por participante
count(ESCOLA_PAI2) %>%
arrange(ESCOLA_PAI2) %>%
print()
escolaridade_pai %>%
ggplot(aes(x = factor(ESCOLA_PAI2), y = n, label = n)) +
geom_bar(stat = "identity", color = "white", fill = "#FC9272") +
labs(x = "ESCOLARIDADE PAI",
y = "Número de Participantes")+
geom_text(aes(label = n), vjust = -0.2, size = 3.5) +
scale_y_continuous(expand = expansion(mult = c(0, 0.15)))+
theme_minimal()+
theme(panel.grid.major = element_line(color = alpha("gray70", 0.2), linewidth = 0.5),
panel.grid.minor = element_line(color = alpha("gray85", 0.1), linewidth = 0.25),
axis.title.x = element_text(size = 9),  # tamanho do título eixo X
axis.title.y = element_text(size = 9),   # tamanho do título eixo Y
legend.position = "none")
escalas_lasso_AP <- dados_AP %>%
select(VD,
INDICE_ESCOL3_norm,
as.factor(INDICE_ESCOL_PAI_norm),
INDICE_ESCOL_MAE_norm,
INDICE_OCUPACAO_norm,
INDICE_OCUPACAO_PAI_norm,
INDICE_OCUPACAO_MAE_norm,
#INDICE_OUTRO_CARGO2_norm,
INDICE_OCUPACAO_SONHOS2_norm,
#INDICE_LOCOMOCAO_norm,
INDICE_MEGA_norm,
INDICE_RENDA_IND_norm,
#INDICE_RENDA_FAM_norm,
#INDICE_BAIRRO_norm,
#DENSIDADE_HABITACAO_norm,
INDICE_IMOVEL_norm,
INDICE_LAZER_norm,
INDICE_LAZER_CAMPINAS_norm,
INDICE_VIAGEM_norm,
INDICE_VIAGEM_LUGAR_norm,
INDICE_VIAGEM_VONTADE_norm,
INDICE_INFANCIA_norm
) %>%
mutate(across(everything(), as.numeric)) %>%
na.omit()
as.factor(infs$INDICE_ESCOL_PAI_norm)
escalas_lasso_AP <- dados_AP %>%
select(VD,
INDICE_ESCOL3_norm,
INDICE_ESCOL_PAI_norm,
INDICE_ESCOL_MAE_norm,
INDICE_OCUPACAO_norm,
INDICE_OCUPACAO_PAI_norm,
INDICE_OCUPACAO_MAE_norm,
#INDICE_OUTRO_CARGO2_norm,
INDICE_OCUPACAO_SONHOS2_norm,
#INDICE_LOCOMOCAO_norm,
INDICE_MEGA_norm,
INDICE_RENDA_IND_norm,
#INDICE_RENDA_FAM_norm,
#INDICE_BAIRRO_norm,
#DENSIDADE_HABITACAO_norm,
INDICE_IMOVEL_norm,
INDICE_LAZER_norm,
INDICE_LAZER_CAMPINAS_norm,
INDICE_VIAGEM_norm,
INDICE_VIAGEM_LUGAR_norm,
INDICE_VIAGEM_VONTADE_norm,
INDICE_INFANCIA_norm
) %>%
mutate(across(everything(), as.numeric)) %>%
na.omit()
as.facotr(dados_AP$INDICE_ESCOL_PAI_norm)
dados_AP$INDICE_ESCOL_PAI_norm <- as.factor(dados_AP$INDICE_ESCOL_PAI_norm)
dados_AP$INDICE_ESCOL_PAI_norm <- as.factor(dados_AP$INDICE_ESCOL_PAI_norm)
escalas_lasso_AP <- dados_AP %>%
select(VD,
INDICE_ESCOL3_norm,
INDICE_ESCOL_PAI_norm,
INDICE_ESCOL_MAE_norm,
INDICE_OCUPACAO_norm,
INDICE_OCUPACAO_PAI_norm,
INDICE_OCUPACAO_MAE_norm,
#INDICE_OUTRO_CARGO2_norm,
INDICE_OCUPACAO_SONHOS2_norm,
#INDICE_LOCOMOCAO_norm,
INDICE_MEGA_norm,
INDICE_RENDA_IND_norm,
#INDICE_RENDA_FAM_norm,
#INDICE_BAIRRO_norm,
#DENSIDADE_HABITACAO_norm,
INDICE_IMOVEL_norm,
INDICE_LAZER_norm,
INDICE_LAZER_CAMPINAS_norm,
INDICE_VIAGEM_norm,
INDICE_VIAGEM_LUGAR_norm,
INDICE_VIAGEM_VONTADE_norm,
INDICE_INFANCIA_norm
) %>%
mutate(across(everything(), as.numeric)) %>%
na.omit()
x_AP <- model.matrix(VD ~ ., escalas_lasso_AP)[, -1]
y_AP <- escalas_lasso_AP$VD
lasso_AP <- cv.glmnet(x_AP, y_AP, alpha = 1)
coef(lasso_AP, s = "lambda.min")
class(dados_AP$INDICE_ESCOL_PAI_norm)
distribuicao.amostra <- dados2 %>%
count(AMOSTRA, VD) %>%
group_by(AMOSTRA) %>%
mutate(prop = prop.table(n),
label = paste0(round(prop * 100, 1), "%\n(", n, ")")) %>%
print()
png("C:/Users/sarah/Downloads/analiseSclasse/analise-quantitativa/graficos/VD-amostra.png", width = 6.5, height = 4.5, units = "in", res = 300)
distribuicao.amostra %>%
ggplot(aes(x = VD, y = prop, fill = VD, label = label)) +
geom_bar(stat = "identity", color = "white") +
labs(x = "Variável Dependente", y = "Proporção de Ocorrência", fill = "VD") +
scale_x_discrete(labels = c("Alveolar", "Palatal", "Zero Fonético", "Aspirada"))+
geom_text(aes(label = label),
vjust = -0.2,
size = 3.5) +
facet_wrap(. ~ AMOSTRA)+
scale_fill_brewer(palette = "Reds")+
scale_y_continuous(labels = percent_format(accuracy = 1),
expand = expansion(mult = c(0, 0.15))) + #espaço no topo para texto
theme_minimal()+
theme(
panel.grid.major = element_line(color = alpha("gray70", 0.2), linewidth = 0.5),
panel.grid.minor = element_line(color = alpha("gray85", 0.1), linewidth = 0.25),
axis.title.x = element_text(size = 9),  # tamanho do título eixo X
axis.title.y = element_text(size = 9),   # tamanho do título eixo Y
legend.position = "bottom")
dev.off()
distribuicao.amostra %>%
ggplot(aes(x = VD, y = prop, fill = VD, label = label)) +
geom_bar(stat = "identity", color = "white") +
labs(x = "Variável Dependente", y = "Proporção de Ocorrência", fill = "VD") +
scale_x_discrete(labels = c("Alveolar", "Palatal", "Zero Fonético", "Aspirada"))+
geom_text(aes(label = label),
vjust = -0.2,
size = 3.5) +
facet_wrap(. ~ AMOSTRA)+
scale_fill_brewer(palette = "Reds")+
scale_y_continuous(labels = percent_format(accuracy = 1),
expand = expansion(mult = c(0, 0.15))) + #espaço no topo para texto
theme_minimal()+
theme(
panel.grid.major = element_line(color = alpha("gray70", 0.2), linewidth = 0.5),
panel.grid.minor = element_line(color = alpha("gray85", 0.1), linewidth = 0.25),
axis.title.x = element_text(size = 9),  # tamanho do título eixo X
axis.title.y = element_text(size = 9),   # tamanho do título eixo Y
legend.position = "bottom")
## interações ####
summary(glm(VD ~ IDADE_MIGRACAO * INDICE_SOCIO_POLI, data = dados_AP, family = binomial))
summary(glm(VD ~ IDADE_MIGRACAO * ESCOLARIDADE, data = dados_AP, family = binomial))
summary(glm(VD ~ IDADE_MIGRACAO * ESCOLARIDADE2, data = dados_AP, family = binomial))
imovel_renda <- infs2 %>%
count(IMOVEL, RENDA_IND, PARTICIPANTE) %>%
group_by(IMOVEL, RENDA_IND) %>%
summarise(n_participantes = n_distinct(IMOVEL)) %>%
arrange(IMOVEL, RENDA_IND) %>%  # Ordenar os dados
print()
ggplot(imovel_renda, aes(x = RENDA_IND, y = n_participantes, fill = IMOVEL)) +
geom_col() +
#labs(x =  "IMOVEL", y = "Número de Participantes")+
#  scale_fill_brewer(
#   palette = "Reds",
#  na.value = "gray70"#,
#  name = "Renda individual",
#  labels = c("Até 1 SM", "1 a 2 SM", "2 a 4 SM", "4 a 9/ 10 a 19 SM")
#) +
theme_minimal()+
theme(axis.text.x = element_text(angle = 45, hjust = 1),
legend.position = "right")
infs2$media_m2
# FEATURE SELECTION - LASSO ####
escalas_lasso_S0 <- dados_S0 %>%
select(VD,
INDICE_ESCOL3_norm,
INDICE_ESCOL_PAI_norm,
INDICE_ESCOL_MAE_norm,
INDICE_OCUPACAO_norm,
INDICE_OCUPACAO_PAI_norm,
INDICE_OCUPACAO_MAE_norm,
#INDICE_OUTRO_CARGO2_norm,
INDICE_OCUPACAO_SONHOS2_norm,
#INDICE_LOCOMOCAO_norm,
INDICE_MEGA_norm,
INDICE_RENDA_IND_norm,
#INDICE_RENDA_FAM_norm,
#INDICE_BAIRRO_norm,
#DENSIDADE_HABITACAO_norm,
INDICE_IMOVEL_norm,
INDICE_LAZER_norm,
INDICE_LAZER_CAMPINAS_norm,
INDICE_VIAGEM_norm,
INDICE_VIAGEM_LUGAR_norm,
INDICE_VIAGEM_VONTADE_norm,
INDICE_INFANCIA_norm) %>%
mutate(across(everything(), as.numeric)) %>%
na.omit()
x_S0 <- model.matrix(VD ~ ., escalas_lasso_S0)[, -1]
y_S0 <- escalas_lasso_S0$VD
lasso_S0 <- cv.glmnet(x_S0, y_S0, alpha = 1)
coef(lasso_S0, s = "lambda.min")
plot(lasso_S0$glmnet.fit, xvar = "lambda", label = TRUE)
# PCA ####
escalas_HAP <- dados_HAP %>%
select(INDICE_ESCOL3_norm,
INDICE_ESCOL_PAI_norm,
INDICE_ESCOL_MAE_norm,
INDICE_OCUPACAO_norm,
INDICE_OCUPACAO_PAI_norm,
INDICE_OCUPACAO_MAE_norm,
#INDICE_OUTRO_CARGO2_norm,
INDICE_OCUPACAO_SONHOS2_norm,
#INDICE_LOCOMOCAO_norm,
INDICE_MEGA_norm,
INDICE_RENDA_IND_norm,
#INDICE_RENDA_FAM_norm,
#INDICE_BAIRRO_norm,
#DENSIDADE_HABITACAO_norm,
INDICE_IMOVEL_norm,
INDICE_LAZER_norm,
INDICE_LAZER_CAMPINAS_norm,
INDICE_VIAGEM_norm,
INDICE_VIAGEM_LUGAR_norm,
INDICE_VIAGEM_VONTADE_norm,
INDICE_INFANCIA_norm
) %>%
mutate(across(everything(), as.numeric)) %>%
na.omit()
# FEATURE SELECTION - LASSO ####
escalas_lasso_HAP <- dados_HAP %>%
select(VD,
INDICE_ESCOL3_norm,
INDICE_ESCOL_PAI_norm,
INDICE_ESCOL_MAE_norm,
INDICE_OCUPACAO_norm,
INDICE_OCUPACAO_PAI_norm,
INDICE_OCUPACAO_MAE_norm,
#INDICE_OUTRO_CARGO2_norm,
INDICE_OCUPACAO_SONHOS2_norm,
#INDICE_LOCOMOCAO_norm,
INDICE_MEGA_norm,
INDICE_RENDA_IND_norm,
#INDICE_RENDA_FAM_norm,
#INDICE_BAIRRO_norm,
#DENSIDADE_HABITACAO_norm,
INDICE_IMOVEL_norm,
INDICE_LAZER_norm,
INDICE_LAZER_CAMPINAS_norm,
INDICE_VIAGEM_norm,
INDICE_VIAGEM_LUGAR_norm,
INDICE_VIAGEM_VONTADE_norm,
INDICE_INFANCIA_norm
) %>%
mutate(across(everything(), as.numeric)) %>%
na.omit()
x_HAP <- model.matrix(VD ~ ., escalas_lasso_HAP)[, -1]
y_HAP <- escalas_lasso_HAP$VD
lasso_HAP <- cv.glmnet(x_HAP, y_HAP, alpha = 1)
coef(lasso_HAP, s = "lambda.min")
plot(lasso_HAP$glmnet.fit, xvar = "lambda", label = TRUE)
